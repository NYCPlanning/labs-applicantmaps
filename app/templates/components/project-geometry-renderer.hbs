
{{!-- Ad-hoc source and layer for developmentSite --}}
{{#if (not (is-empty model.developmentSite))}}
  {{#map.source options=(mapbox-geojson-source model.developmentSite) as |source|}}
    {{source.layer
      data-test-layer=developmentSiteLayer.id
      supportsDataTestProperties=true
      layer=developmentSiteLayer
      before='boundary_country'
    }}
  {{/map.source}}
{{/if}}

{{!-- Ad-hoc source and layer for projectArea --}}
{{#if (not (is-empty model.projectArea))}}
  {{#map.source options=(mapbox-geojson-source model.projectArea) as |source|}}
    {{source.layer
      data-test-layer=projectAreaLayer.id
      supportsDataTestProperties=true
      layer=projectAreaLayer
      before='boundary_country'
    }}
  {{/map.source}}
{{/if}}

{{!-- Ad-hoc source and layer for rezoningArea --}}
{{!-- if a rezoning area exists AND --}}
{{!-- we're drawing rezoning OR viewing the dashboard (type is undefined) --}}
{{#if
  (and
    (not (is-empty model.rezoningArea))
    (or (eq type 'rezoning-area') (not type))
  )
}}
  {{#map.source options=(mapbox-geojson-source model.rezoningArea) as |source|}}
    {{source.layer
      data-test-layer=rezoningAreaLayer.id
      supportsDataTestProperties=true
      layer=rezoningAreaLayer
      before='boundary_country'
    }}
  {{/map.source}}
{{/if}}

{{!-- Ad-hoc source and layer for proposedZoning --}}
{{#if (and (not (is-empty model.underlyingZoning)) model.needUnderlyingZoning)}}
  {{#map.source options=(mapbox-geojson-source model.underlyingZoning) as |source|}}
    {{source.layer
      data-test-layer=underlyingZoningLayer.id
      supportsDataTestProperties=true
      layer=underlyingZoningLayer
      before='boundary_country'
    }}
    {{source.layer
      data-test-layer=underlyingZoningLabelsLayer.id
      supportsDataTestProperties=true
      layer=underlyingZoningLabelsLayer
      before='boundary_country'
    }}
  {{/map.source}}
{{/if}}

{{!-- Ad-hoc source and layer for proposedCommercialOverlays --}}
{{#if (and (not (is-empty model.commercialOverlays)) model.needCommercialOverlays)}}
  {{#map.source options=(mapbox-geojson-source model.commercialOverlays) as |source|}}
    {{source.layer
      data-test-layer=commercialOverlaysLayer.id
      supportsDataTestProperties=true
      layer=commercialOverlaysLayer
      before='boundary_country'
    }}
    {{source.layer
      data-test-layer=coLayer.id
      supportsDataTestProperties=true
      layer=coLayer
      before='boundary_country'
    }}
    {{source.layer
      data-test-layer=c11Layer.id
      supportsDataTestProperties=true
      layer=c11Layer
      before='boundary_country'
    }}
    {{source.layer
      data-test-layer=c12Layer.id
      supportsDataTestProperties=true
      layer=c12Layer
      before='boundary_country'
    }}
    {{source.layer
      data-test-layer=c13Layer.id
      supportsDataTestProperties=true
      layer=c13Layer
      before='boundary_country'
    }}
    {{source.layer
      data-test-layer=c14Layer.id
      supportsDataTestProperties=true
      layer=c14Layer
      before='boundary_country'
    }}
    {{source.layer
      data-test-layer=c15Layer.id
      supportsDataTestProperties=true
      layer=c15Layer
      before='boundary_country'
    }}
    {{source.layer
      data-test-layer=c21Layer.id
      supportsDataTestProperties=true
      layer=c21Layer
      before='boundary_country'
    }}
    {{source.layer
      data-test-layer=c22Layer.id
      supportsDataTestProperties=true
      layer=c22Layer
      before='boundary_country'
    }}
    {{source.layer
      data-test-layer=c23Layer.id
      supportsDataTestProperties=true
      layer=c23Layer
      before='boundary_country'
    }}
    {{source.layer
      data-test-layer=c24Layer.id
      supportsDataTestProperties=true
      layer=c24Layer
      before='boundary_country'
    }}
    {{source.layer
      data-test-layer=c25Layer.id
      supportsDataTestProperties=true
      layer=c25Layer
      before='boundary_country'
    }}
  {{/map.source}}
{{/if}}

{{!-- Ad-hoc source and layer for proposedSpecialPurposeDistricts --}}
{{#if (and (not (is-empty model.specialPurposeDistricts)) model.needSpecialPurposeDistricts)}}
  {{#map.source options=(mapbox-geojson-source model.specialPurposeDistricts) as |source|}}
    {{source.layer
      data-test-layer=specialPurposeDistrictsLayer.id
      supportsDataTestProperties=true
      layer=specialPurposeDistrictsLayer
      before='boundary_country'
    }}
    {{source.layer
      data-test-layer=specialPurposeDistrictsLabelsLayer.id
      supportsDataTestProperties=true
      layer=specialPurposeDistrictsLabelsLayer
      before='boundary_country'
    }}
  {{/map.source}}
{{/if}}

{{ map.image 'arrow' '/img/arrow.png' }}
{{ map.image 'centerline' '/img/centerline.png' }}
{{#if (not (is-empty model.annotations))}}
  {{project-geometries/utils/annotations-renderer map=map annotations=model.annotations}}
{{/if}}
